---
title: Up and running with blogdown
author: Alison Presmanes Hill
date: '2017-05-17'
slug: up-and-running-with-blogdown
categories:
  - R
tags:
  - blogdown
summary: A quick guide to getting up and running with blogdown, Github, and Netlify
draft: TRUE
output:
  blogdown::html_page:
    toc: true
    number_sections: true
---

```{r include = FALSE}
knitr::opts_chunk$set(eval = FALSE, collapse = TRUE, comment = NA, tidy = FALSE)
```


# Read up on blogdown

Before you start, I recommend reading the following:

* _[`blogdown`: Creating Websites with R Markdown](https://bookdown.org/yihui/blogdown/)_ by Yihui Xie and Amber Thomas
* _[Making a Website Using `blogdown`, Hugo, and GitHub pages](https://proquestionasker.github.io/blog/Making_Site/)_ by Amber Thomas
* _[Getting Started with `blogdown`](https://www.znmeb.mobi/2017/05/12/getting-started-with-blogdown/)_ by M. Edward (Ed) Borasky

I also found this comment by Eric Nantz, the creator of [the R-Podcast](http://r-podcast.org), in the [`rbind/support` issues section on Github](https://github.com/rbind/support) to be helpful:

* [https://github.com/rbind/support/issues/12](https://github.com/rbind/support/issues/12)


# Caveats, disclaimers, etc.

Even with all the great resources I listed above, getting myself up and running took a few tries, so in this post I'm passing along what ended up working for me. Everyone's mileage may vary, though, depending on your operating system and your approach. 

*My operating system and approach:* I am a macOS user, and I use R, RStudio, Git (usually via [GitLab](https://about.gitlab.com), occasionally via [GitHub](https://github.com)), and terminal regularly, so I'm assuming familiarity here with all of these. If that is not you, here are some places to get started:

* For Git: [Happy Git with R](http://happygitwithr.com) by Jenny Bryan et al.
* For RStudio: [DataCamp's Working with the RStudio IDE (free)](https://www.datacamp.com/courses/working-with-the-rstudio-ide-part-1) by Garrett Grolemund
* For Terminal: [The Command Line Murder Mystery](https://github.com/veltman/clmystery) by Noah Veltman

I also have [Xcode](https://developer.apple.com/xcode/) and [Homebrew](https://brew.sh) installed- [you will probably need these to download Hugo](https://bookdown.org/yihui/blogdown/installation.html). If you don't have either but are on a mac, this link may help:

* [How to install Xcode, Homebrew, Git, RVM, Ruby & Rails on Mac OS X ](https://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

Wherever offered, I followed Yihui and Amber's recommendations. For example:

* ["Considering the cost and friendliness to beginners, we currently recommend Netlify."](https://bookdown.org/yihui/blogdown/deployment.html) Sold. 
* ["If you are not familiar with domain names or do not want to learn more about them, an option for your consideration is a free subdomain `*.rbind.io` offered by RStudio, Inc."](https://bookdown.org/yihui/blogdown/netlify.html). Done. 

I did not want to learn more about a lot of things. I have a 4-month-old baby so it seemed safest to wait to learn more things until I am getting REM sleep again, so maybe in 2 or 3 years I will be more ambitious!

# In Github

![](/img/posts/2017-05-17-up-and-running-with-blogdown/blogdown-signpost-1.png)

* Go online to your [Github](https://github.com) account and create a new repository. A few things you need to know now:
    - If you are going to use [Netlify](https://www.netlify.com) to host the site, rather than [Github Pages](https://pages.github.com), you can name this repository anything you want! You can see some of the repo names used by members of the `rbind` organization [here](https://github.com/rbind/repositories).
    - If you want to host your site as a [Github Page](https://pages.github.com), you should name your repository `yourgithubusername.github.io`

![Figure: Creating a new repository in Github](/img/posts/2017-05-17-up-and-running-with-blogdown/github-new-repo.png)


    
# In terminal

![](/img/posts/2017-05-17-up-and-running-with-blogdown/blogdown-signpost-2.png)

Or your alternative command line tool for a Windows machine.
    
* Use `cd` to navigate into the directory where you want your repo to be, and then type:
`git clone https://github.com/apreshill/apreshill.git`

This is what subsequently printed in my terminal window:

```{r}
ORPA473:r-projects hillali$ git clone https://github.com/apreshill/apreshill.git
Cloning into 'apreshill'...
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done.
Checking connectivity... done.
ORPA473:r-projects hillali$ 
```

# In RStudio 

![](/img/posts/2017-05-17-up-and-running-with-blogdown/blogdown-signpost-3.png)


* Install `blogdown` from your RStudio console. If you already have `devtools` installed like I did, you can just use the second line below:

```{r}
if (!requireNamespace("devtools")) install.packages("devtools")
devtools::install_github("rstudio/blogdown")
```

* Still in the RStudio console, load the `blogdown` package to run the `install_hugo` function:

```{r}
blogdown::install_hugo()
# or
library(blogdown)
install_hugo()
```

{{% alert note %}}
Your working directory does not matter for either of the above steps, so don't worry about where R thinks you are.
{{% /alert %}}



_NB_: this is where my instructions differ from Ed's- he states that `blogdown` won't create a website in your root folder because the `README.md` file is already there. I didn't find that to be the case- I tested this with a new site as well. If one way doesn't work for you, try the other!

* Use your menu buttons on top to select File --> New Project --> Existing directory, then I pointed RStudio to 

![Figure: Creating a new project in an existing directory in RStudio](/img/posts/2017-05-17-up-and-running-with-blogdown/r-project-existing-directory.png)

* Now, if you are using git for version control, edit your `*gitignore` file. I opened mine from RStudio but you can use any text editor to open and edit this file. Below is what it should look like: the first four lines will automatically be in this file if you have set up your RStudio Project, but if you plan to use Netlify to deploy, you need to add the `public/` line ([read about here](https://bookdown.org/yihui/blogdown/version-control.html).)

```{r}
.Rproj.user
.Rhistory
.RData
.Ruserdata
blogdown
.DS_Store # if a windows user, Thumbs.db instead
public/ # if using Netlify
```



# Doing the fun stuff in RStudio

![](/img/posts/2017-05-17-up-and-running-with-blogdown/blogdown-signpost-4.png)

## Build your site

* Now you can finally build your site using the `blogdown::new_site()` function. But first you should think about themes, and do one of 2 things...


1. If you want a theme other than the default, which is the lithium theme, you can do this now!
    
```{r}
# for example, create a new site with the academic theme
blogdown::new_site(theme = "gcushen/hugo-academic", sample = TRUE, theme_example = TRUE)
```

    
2. If instead you want to add the theme later (like I did, because I didn't see the above example until it was too late!), use this function:
    
```{r}
blogdown::new_site() # default theme is lithium
# need to stop serving so can use console
install_theme("gcushen/hugo-academic", theme_example = TRUE, update_config = TRUE)
```

I recommend setting `theme_example = TRUE`- some themes won't provide an example site, but the academic theme did and I found it helpful to see. The default for `update_config` is `TRUE`.


## Add-ins

https://bookdown.org/yihui/blogdown/rstudio-ide.html

## Edit your configurations

Relevant reading:

* [`blogdown` book chapter on configuration](https://bookdown.org/yihui/blogdown/configuration.html)
* [Additional detail from Amber](https://proquestionasker.github.io/blog/Making_Site/#site-configuration)

Edit the `baseURL` in your `config.toml` file

If you just want to use `serve_site` and view locally, be sure that this is it:
baseurl = "https://example.com/"
```{r}
baseurl = "/"
```

{{% alert warning %}}
Make sure that the `baseurl = ` listed has a `/` at the end!
{{% /alert %}}




## Posting

This surprisingly was harder than you would think. Note: in the academic theme, these are called posts. Here are some relevant links:

* _[`blogdown` book chapter on RStudio IDE](https://bookdown.org/yihui/blogdown/rstudio-ide.html)_
* _[`blogdown` book chapter on output formats](https://bookdown.org/yihui/blogdown/output-format.html):_ on .md versus .Rmd posts
* _[Additional detail from Amber](https://proquestionasker.github.io/blog/Making_Site/#adding-a-blog-post-or-portfolio-piece)_ on adding a blog post



### Draft posts

Whether you do a markdown or R Markdown post (see below), you should know that in the YAML front matter of your new file, you can add `draft: TRUE` and you will be able to preview your post using `blogdown::serve_site()`, but conveniently your post will not show up on your deployed site until you either remove the `draft` option or set it to false (since the default is true).

* _[From Yihui & Amber's `blogdown` book:](https://bookdown.org/yihui/blogdown/local-preview.html)_ Building a website for local preview


### New markdown posts

* To author a new plain `.md` post, either use this function in your console:

```{r}
blogdown::new_post()
blogdown::new_post(rmd = FALSE) # false is the default!
```

Here are the arguments according to `?new_post`:

```{r}
new_post(title, kind = "default", open = interactive(), 
    author = getOption("blogdown.author"), categories = NULL, 
    tags = NULL, date = Sys.Date(), file = NULL, slug = NULL, 
    subdir = getOption("blogdown.subdir", "post"), rmd = getOption("blogdown.rmd", 
        FALSE))
```

Title needs to be in quotes.

Or alternatively, you can use the handy Addins dropdown menu in the 

### New RMarkdown posts

{{% alert warning %}}
The most important thing to remember is to **not** knit your .Rmd posts. Use `blogdown::serve_site` first before pushing to Github. The only Netlify deployment failures I ever experienced were because I knitted to html.
{{% /alert %}}

* To author a new `.Rmd` post where you can use R chunks and have them rendered, either use this function in your console:

```{r}
blogdown::new_post(rmd = TRUE) # false is the default!
```

Or again, you can use the handy Addins dropdown menu in the 

* _**Importantly**_, to have the `.Rmd` file include rendered R chunks, you must run `blogdown::serve_site()` first before pushing to your Github repo. You can check that there is an `.html` file in the right directory, in addition to your `.Rmd` file. 



### Adding images to a post

If you want to include an image that is not a figure created from an R chunk, the [recommended method](https://github.com/rstudio/blogdown/issues/45) is to: 

1. Add the image to your `/static/img/` folder, then 
2. Reference the image using the relative file path as follows:

```{r}
![my-image](/img/my-image.png)
```

# Deploy in Netlify

![](/img/posts/2017-05-17-up-and-running-with-blogdown/blogdown-signpost-5.png)

* When you are ready to deploy, push to GitHub, then go to [Netlify](https://www.netlify.com). 
* Click on the Sign Up button; I opted to sign up using my existing GitHub account. 
* Log in, and select: New site from Git >> Continuous Deployment: GitHub.
* From there, Netlify will allow you to select from your existing GitHub repositories. You'll pick the repo you've been working from with `blogdown`, then you'll configure your build. This involves

From [Netlify](https://www.netlify.com/docs/continuous-deployment/#common-configuration-directives):

*"For Hugo hosting, `hugo` will build and deploy with the version 0.17 of `hugo`. You can specify a specific `hugo` release like this: `hugo_0.15`. Currently `0.13`, `0.14`, `0.15`, `0.16`, `0.17`, `0.18` and `0.19` are supported. For version `0.20` and above, youâ€™ll need to create a Build environment variable called `HUGO_VERSION` and set it to the version of your choice."*

I opted for the former, and specified `hugo_0.19`. However, you can check your `hugo` version in terminal using the command [`hugo version`](https://gohugo.io/overview/quickstart/). This is what my output looked like, which means that I could run version `0.20` if I wanted to through Netlify, but I went with `0.19` and it works just fine.

```{r}
$ hugo version
Hugo Static Site Generator v0.20.7 darwin/amd64 BuildDate: 2017-05-08T18:37:40-07:00
```

Here is a screenshot of my final step:

![](/img/posts/2017-05-17-up-and-running-with-blogdown/netlify-build-settings.png)
